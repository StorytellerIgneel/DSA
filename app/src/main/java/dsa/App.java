/*
 * This source file was generated by the Gradle 'init' task
 */
package dsa;

import java.util.*;

public class App {

    public static void main(String[] args) {
        BestFitDecreasing bfd = new BestFitDecreasing();

        while (!bfd.getCargoTreeMap().isEmpty()) {
            Integer key = bfd.getCargoTreeMap().firstKey(); // largest key
            List<CargoWrapper> wrappers = bfd.getCargoTreeMap().get(key);

            while (!wrappers.isEmpty()) {
                Cargo cargo = wrappers.get(0).getCargo();
                bfd.loadCargo(cargo);
            }

            if (wrappers.isEmpty()) {
                bfd.getCargoTreeMap().remove(key);
            }
        }

        int sum = 0;
        int limit = 30; // Number of airplanes to show
        System.out.println("First few completed airplanes:");
        List<Airplane> completed = bfd.getCompletedAirplanes();
        for (int i = 0; i < Math.min(limit, completed.size()); i++) {
            Airplane plane = completed.get(i);
            sum += plane.getCargoListSize();
            System.out.println("Airplane #" + (i + 1));
            System.out.println(plane);
        }
        System.out.println("...");
        System.out.println("Total Airplanes used: " + completed.size());
        System.out.println("Total Cargoes loaded: " + sum);
        ExcelReader.exportToExcel("BFD_report.xlsx", bfd.getCompletedAirplanes(), "BFD_report");

        // FFD
        FisrtFitDecreasing ffd = new FisrtFitDecreasing();
        ffd.FFDPacking();
        ExcelReader.exportToExcel("FFD_report.xlsx", ffd.getCompletedAirplanes(), "FFD_report");

        int sumFFD = 0;

        System.out.println("First Fit Decreasing (FFD) Result:");
        List<Airplane> ffdCompleted = ffd.getCompletedAirplanes();

        for (int i = 0; i < Math.min(limit, ffdCompleted.size()); i++) {
            Airplane plane = ffdCompleted.get(i);
            sumFFD += plane.getCargoListSize();
            System.out.println("Airplane #" + (i + 1));
            System.out.println(plane);
        }

        System.out.println("...");
        System.out.println("Total Airplanes used (FFD): " + ffdCompleted.size());
        System.out.println("Total Cargoes loaded (FFD): " + sumFFD);

    }

}
